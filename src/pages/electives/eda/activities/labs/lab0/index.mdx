---
title: Event-Driven Architecture Lab 0 - Getting Started with Producing & Consuming on Kubernetes
description: Lab Getting Started with Producing & Consuming on Kubernetes
---

## Problem

Produce and consume events to and from an IBM Event Streams on Cloud instance, using NodeJS and Java console samples on Kubernetes/OpenShift cluster.

### Using the NodeJS sample

To complete this lab scenario, you will need to perform the following steps:

- Make use of the NodeJS project located at https://github.com/ibm-messaging/event-streams-samples/tree/master/kafka-nodejs-console-sample
- Create a lite/free IBM Event Streams instance on IBM Cloud
- Create Service Credentials for your IBM Event Streams instance
- Create kubernetes secret
- Deploy kubernetes pod
- Check the logs

### Use the Java sample

- Make use of the Java project located at https://github.com/ibm-messaging/event-streams-samples/tree/master/kafka-java-console-sample
- Create a lite/free IBM Event Streams instance on IBM Cloud
- Create Service Credentials for your IBM Event Streams instance
- Create kubernetes secret
- Deploy kubernetes pod
- Check the logs

## Verification

When you have completed this lab, you will see output similar to the following in your terminal window. The topic name will be specific to the implementation technology that you are using for the given sample.

__NodeJS__
```
Creating the topic kafka-nodejs-console-sample-topic with AdminClient
AdminClient connected
This sample app will run until interrupted.
The consumer has connected.
The producer has connected.
No messages consumed
Message produced, partition: 0 offset: 535
Message produced, partition: 0 offset: 536
No messages consumed
Message produced, partition: 0 offset: 537
Message consumed: topic=kafka-nodejs-console-sample-topic, partition=0, offset=535, key=Key0, value=This is a test message #0
Message consumed: topic=kafka-nodejs-console-sample-topic, partition=0, offset=536, key=Key1, value=This is a test message #1
Message consumed: topic=kafka-nodejs-console-sample-topic, partition=0, offset=537, key=Key2, value=This is a test message #2
Message produced, partition: 0 offset: 538
Message consumed: topic=kafka-nodejs-console-sample-topic, partition=0, offset=538, key=Key3, value=This is a test message #3
```

__Java__
```
[2020-04-28 20:44:53,004] INFO Using command line arguments to find credentials. (com.eventstreams.samples.EventStreamsConsoleSample)
[2020-04-28 20:44:53,005] INFO Kafka Endpoints: broker...cloud.ibm.com:9093 (com.eventstreams.samples.EventStreamsConsoleSample)
[2020-04-28 20:44:56,639] INFO Creating the topic kafka-java-console-sample-topic (com.eventstreams.samples.EventStreamsConsoleSample)
[2020-04-28 20:44:59,826] INFO Topic kafka-java-console-sample-topic already exists (com.eventstreams.samples.EventStreamsConsoleSample)
[2020-04-28 20:45:00,816] INFO [Partition(topic = kafka-java-console-sample-topic, partition = 0, leader = 3, replicas = [3,1,2], isr = [3,2,1], offlineReplicas = [])] (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:00,817] INFO class com.eventstreams.samples.ConsumerRunnable is starting. (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:01,646] INFO [Partition(topic = kafka-java-console-sample-topic, partition = 0, leader = 3, replicas = [3,1,2], isr = [3,2,1], offlineReplicas = [])] (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:01,646] INFO EventStreamsConsoleSample will run until interrupted. (com.eventstreams.samples.EventStreamsConsoleSample)
[2020-04-28 20:45:01,646] INFO class com.eventstreams.samples.ProducerRunnable is starting. (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:02,590] INFO Message produced, offset: 195 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:03,819] INFO No messages consumed (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:04,697] INFO Message produced, offset: 196 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:06,795] INFO Message produced, offset: 197 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:06,821] INFO No messages consumed (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:07,020] INFO Message consumed: ConsumerRecord(topic = kafka-java-console-sample-topic, partition = 0, leaderEpoch = 56, offset = 197, CreateTime = 1588106706698, serialized key size = 3, serialized value size = 25, headers = RecordHeaders(headers = [], isReadOnly = false), key = key, value = This is a test message #2) (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:08,933] INFO Message produced, offset: 198 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:08,954] INFO Message consumed: ConsumerRecord(topic = kafka-java-console-sample-topic, partition = 0, leaderEpoch = 56, offset = 198, CreateTime = 1588106708797, serialized key size = 3, serialized value size = 25, headers = RecordHeaders(headers = [], isReadOnly = false), key = key, value = This is a test message #3) (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:11,024] INFO Message consumed: ConsumerRecord(topic = kafka-java-console-sample-topic, partition = 0, leaderEpoch = 56, offset = 199, CreateTime = 1588106710933, serialized key size = 3, serialized value size = 25, headers = RecordHeaders(headers = [], isReadOnly = false), key = key, value = This is a test message #4) (com.eventstreams.samples.ConsumerRunnable)
[2020-04-28 20:45:11,028] INFO Message produced, offset: 199 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:13,114] INFO Message produced, offset: 200 (com.eventstreams.samples.ProducerRunnable)
[2020-04-28 20:45:13,115] INFO Message consumed: ConsumerRecord(topic = kafka-java-console-sample-topic, partition = 0, leaderEpoch = 56, offset = 200, CreateTime = 1588106713028, serialized key size = 3, serialized value size = 25, headers = RecordHeaders(headers = [], isReadOnly = false), key = key, value = This is a test message #5) (com.eventstreams.samples.ConsumerRunnable)
```

## Extra credit

Using your knowledge of containerization and CI/CD pipelines gained through the bootcamp, construct a pipeline that will build, deploy, and manage these sample applications on a Kubernetes or OpenShift cluster on IBM Cloud.

## References

- [IBM Event Streams on IBM Cloud - Getting started tutorial](https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-getting_started)
